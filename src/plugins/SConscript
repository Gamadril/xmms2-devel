
Import('base_env')

base_env = base_env.Copy(LINKFLAGS=["-module", "-avoid-version"])

Export('base_env')

file = base_env.Copy()
file.AddFlagsFromGroup("glib")
file.XmmsPlugin('xmms_file', ['file/file.c'])

oss = base_env.Copy()
oss.AddFlagsFromGroup("glib")
oss.XmmsPlugin('xmms_oss', ['oss/oss.c'])

m3u = base_env.Copy()
m3u.AddFlagsFromGroup("glib")
m3u.XmmsPlugin('xmms_m3u', ['m3u/m3u.c'])

eq = base_env.Copy()
eq.AddFlagsFromGroup("glib")
eq.XmmsPlugin('xmms_eq', ['eq/eq.c'])

if base_env.HasGroup("mad"):
	mad = base_env.Copy()
	mad.AddFlagsFromGroup("glib")
	mad.AddFlagsFromGroup("mad")
	mad.XmmsPlugin('xmms_mad', ['mad/mad.c', 'mad/id3.c', 'mad/xing.c'])

if base_env.HasGroup("vorbis"):
	vorbis = base_env.Copy()
	vorbis.AddFlagsFromGroup("glib")
	vorbis.AddFlagsFromGroup("vorbis")
	vorbis.XmmsPlugin('xmms_vorbis', ['vorbis/vorbis.c'])

if base_env.HasGroup("vorbis") and base_env.HasGroup("shout") and base_env.HasGroup("vorbisenc"):
	ices = base_env.Copy()
	ices.AddFlagsFromGroup("glib")
	ices.AddFlagsFromGroup("vorbis")
	ices.AddFlagsFromGroup("vorbisenc")
	ices.AddFlagsFromGroup("shout")
	ices.XmmsPlugin('xmms_ices', ['ices/ices.c', 'ices/encode.c'])

if base_env.HasGroup("sqlite"):
	sqlite = base_env.Copy()
	sqlite.AddFlagsFromGroup("glib")
	sqlite.AddFlagsFromGroup("sqlite")
	sqlite.XmmsPlugin('xmms_sqlite', ['sqlite/sqlite.c'])

if base_env.HasGroup("curl"):
	curl_http = base_env.Copy()
	curl_http.AddFlagsFromGroup("glib")
	curl_http.AddFlagsFromGroup("curl")
	curl_http.XmmsPlugin('xmms_curlhttp', ['curl/curl_http.c'])

	curl_ftp = base_env.Copy()
	curl_ftp.AddFlagsFromGroup("glib")
	curl_ftp.AddFlagsFromGroup("curl")
	curl_ftp.XmmsPlugin('xmms_curlftp', ['curl/curl_ftp.c'])

