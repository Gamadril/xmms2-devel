def build(bld):
  obj = bld.create_obj('cc', 'shlib')
  obj.includes = '../../include'
  obj.target = 'xmms_diskwrite'
  obj.source = 'diskwrite.c'
  obj.uselib = 'glib-2.0'

def configure(conf):
  if conf.check_pkg('glib-2.0', vnum='2.6.0', destvar='glib-2.0'):
    conf.env['CCDEFINES'].append('_REENTRANT')
    conf.env['XMMS_PLUGINS_ENABLED'].append('diskwrite')
